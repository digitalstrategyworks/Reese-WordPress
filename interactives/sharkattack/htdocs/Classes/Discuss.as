package Classes {		import flash.display.Sprite;	import flash.net.URLLoader;	import flash.net.URLRequest;	import flash.net.URLRequestMethod;		import flash.events.Event;		import flash.events.MouseEvent;		import Classes.Utilities.*;				import flash.display.MovieClip;		public class Discuss extends Sprite {		//define xmlLists		public var allDiscussList:XMLList;		public var nameList:XMLList;		public var commentList:XMLList;				//set columns for the added discussion nodes		public var cols: int = 1;				//define vars that will load xml from php/mysql		public var loader:URLLoader = new URLLoader();		public var url:URLRequest = new URLRequest("sharkDBconnect.php");					public var contentMask:Sprite = new Sprite();			public function Discuss() {			//add scrollpane to box so that people can see all comments			scrollPane_mc.source = discussionBox_mc;						loader.addEventListener(Event.COMPLETE, loaded);			loader.load(url);			url.method = URLRequestMethod.POST;			url.data = true;										//listen for user submitting a comment			this.addEventListener("submitDiscuss", submitDiscussHeard);				}				public function submitDiscussHeard(e:CustomEvent):void {												//reset if someone submits a new comment			if(discussionBox_mc.numChildren > 1) {				removeContent();							}						//call url that inserts new rows into db			var insertURL:URLRequest = new URLRequest ("sharkDBinsert.php?name="+submitName_txt.text+"&comment="+submitComments_txt.text);										insertURL.method = URLRequestMethod.POST;			insertURL.data = true;						loader.addEventListener(Event.COMPLETE, loaded);			loader.load(insertURL);											}						public function loaded(e:Event):void {						var submittedXML = new XML(e.target.data);			parseDiscussXML(submittedXML);						}				public function parseDiscussXML(phpXML:XML):void {						//define xml			nameList = phpXML.entry.name;			commentList = phpXML.entry.comment;			allDiscussList = phpXML.entry;			//trace(nameList);						//create new dicussion elements based on how many exist in db			for(var i:int = 0; i<allDiscussList.length(); i++){				var d: AddDiscussion = new AddDiscussion(i, nameList[i], commentList[i]);				d.x = (d.width) * (i % cols) + 10;				d.y = (d.height + 10) * Math.floor(i/cols) + 10;				discussionBox_mc.addChild(d);								//have scrollpane update to resize if new content is added				scrollPane_mc.refreshPane();							}								}					//function to reset the discussionbox when new content is added		public function removeContent():void {			trace("removeContent");						while(discussionBox_mc.numChildren > 1){				trace("removed");				discussionBox_mc.removeChildAt(1);									}		}		}	}